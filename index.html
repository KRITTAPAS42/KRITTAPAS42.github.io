<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Account Sign In</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      width: 100%;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background: url('img/2.jpg') no-repeat center center fixed;
      background-size: cover;
      overflow: hidden;
      position: relative;
    }

    .blob {
      position: absolute;
      background: rgba(255, 255, 255, 0.25);
      border-radius: 50%;
      filter: blur(100px);
      animation: blobMove 20s infinite ease-in-out alternate;
      z-index: 0;
    }

    .blob.blob1 { top: -150px; left: -150px; animation-delay: 0s; }
    .blob.blob2 { bottom: -150px; right: -150px; animation-delay: 5s; }
    .blob.blob3 { top: 40%; left: 60%; animation-delay: 10s; }

    @keyframes blobMove {
      0% { transform: scale(1) translate(0, 0); }
      100% { transform: scale(1.2) translate(60px, 40px); }
    }

    .container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
      text-align: center;
      background: #ffffff;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      max-width: 360px;
      width: 90%;
    }

    .container1 {
      position: absolute;
      top: 90%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
      text-align: center;
      background: #ffffff;
      padding: 10px;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      max-width: 360px;
      width: 90%;
    }

    .logo {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 50%;
      margin: 0 auto 20px;
      box-shadow: 0 4px 10px rgba(255, 255, 255, 0.1);
    }

    h1 {
      margin-bottom: 15px;
      font-size: 28px;
      color: #333;
    }

    p {
      color: #666;
      font-size: 16px;
      margin-bottom: 30px;
    }

    button {
      padding: 14px 28px;
      font-size: 18px;
      background: #4285F4;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease;
      box-shadow: 0 4px 12px rgba(66, 133, 244, 0.4);
    }

    button:hover {
      background: #3367d6;
      transform: translateY(-2px);
    }

    /* A2HS Instruction */
    #installPrompt {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      text-align: center;
      padding: 20px;
      width: 90%;
      max-width: 360px;
      z-index: 999;
      display: none;
      animation: slideUp 0.4s ease-out;
    }

    #installPrompt img {
      width: 48px;
      height: 48px;
      margin-bottom: 12px;
      border-radius: 12px;
    }

    #installPrompt h3 {
      font-size: 18px;
      color: #333;
      margin-bottom: 6px;
    }

    #installPrompt p {
      font-size: 14px;
      color: #666;
      margin-bottom: 10px;
    }

    #installPrompt .a2hs-icon {
      width: 20px;
      vertical-align: middle;
      margin: 0 4px;
    }

    #installPrompt .dismiss-btn {
      position: absolute;
      top: 8px;
      right: 12px;
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: #aaa;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translate(-50%, 60px); }
      to { opacity: 1; transform: translate(-50%, 0); }
    }
  </style>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";

    const firebaseConfig = {
  apiKey: "AIzaSyAuKfk6pdPc5ej5spgPED82uzu8PHucMds",
  authDomain: "public-health-e8fc9.firebaseapp.com",
  databaseURL: "https://public-health-e8fc9-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "public-health-e8fc9",
  storageBucket: "public-health-e8fc9.firebasestorage.app",
  messagingSenderId: "912640760614",
  appId: "1:912640760614:web:9140025c48179271b83fe7",
  measurementId: "G-1GXCPG7S7D"
};
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    window.loginWithGoogle = async () => {
      try {
        const result = await signInWithPopup(auth, provider);
        const user = result.user;

        localStorage.setItem("user", JSON.stringify({
          name: user.displayName,
          email: user.email,
          photo: user.photoURL,
          uid: user.uid
        }));

        window.location.href = "home.html";
      } catch (error) {
        console.error(error);
        alert("Login failed: " + error.message);
      }
    };
  </script>
</head>
<body>
  <!-- Animated Blobs -->
  <div class="blob blob1"></div>
  <div class="blob blob2"></div>
  <div class="blob blob3"></div>

  <!-- Login Container -->
<div class="container">
  <img src="img/1.jpg" alt="Logo" class="logo" />
  <h1>Welcome Back!</h1>
  <p>Sign in with your Google account to continue</p>
  <button onclick="loginWithGoogle()">Sign in with Google</button>
  <div id="a2hs-instruction" style="margin-top:12px; font-size: 14px; color: #4285F4; font-weight: 500; user-select: none; display: flex; align-items: center; justify-content: center; gap: 6px;">
    <span>Tap</span>
    <img src="https://img.icons8.com/ios-glyphs/20/4285F4/share--v1.png" alt="Share icon" style="width:20px; height:20px;"/>
    <span>then <strong>Add to Home Screen</strong></span>
  </div>
</div>

<div class="container1">
<img src="https://img.icons8.com/ios-glyphs/20/4285F4/share--v1.png" alt="Share icon" style="width:20px; height:20px;"/>
    <span>then <strong>Add to Home Screen</strong></span>
    </div>
  </div>

  <script>
    function isIos() {
      return /iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());
    }

    function isAndroid() {
      return /android/.test(navigator.userAgent.toLowerCase());
    }

    function isInStandaloneMode() {
      return ('standalone' in window.navigator) && window.navigator.standalone;
    }

    function showPrompt() {
      document.getElementById('installPrompt').style.display = 'block';
    }

    function dismissPrompt() {
      localStorage.setItem('a2hsDismissed', 'true');
      document.getElementById('installPrompt').style.display = 'none';
    }

    window.addEventListener('load', () => {
      if (!localStorage.getItem('a2hsDismissed') && !isInStandaloneMode()) {
        if (isIos() || isAndroid()) {
          setTimeout(showPrompt, 1200);
        }
      }
    });
  </script>
</body>
</html>
